<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>T√¥ m√†u cho di·ªÅu</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/color.css" />
  <script defer src="js/color.js"></script>
</head>
<body>
  <header class="header">
    <div class="container header-inner">
      <img src="images/logo.webp" alt="Logo Blue Sky" class="logo" />
      <button class="menu-toggle" id="menuToggle" aria-label="M·ªü menu">‚ò∞</button>
      <nav class="nav" id="mainNav">
        <a href="index.html">Trang ch·ªß</a>
        <a href="about.html">Gi·ªõi thi·ªáu</a>
        <a href="shop.html">S·∫£n ph·∫©m</a>
        <a href="color.html" class="active">T√¥ m√†u</a>
        <a href="events.html">S·ª± ki·ªán</a>
        <a href="contact.html">Li√™n h·ªá</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="container box">
      <h1>T√î M√ÄU CHO DI·ªÄU</h1>

      <div class="controls-row">
        <div class="select-area">
          <select id="imageSelect" required class="placeholder">
            <option id="placeholderOption" value="" disabled selected hidden>Di·ªÅu Blue Sky...</option>
            <option value="images/color/color/pilot.jpg">Pilot</option>
            <option value="images/color/color/pilotlung.jpg">Pilot m·∫∑t l∆∞ng</option>
            <option value="images/color/color/cavang.jpg">c√° v√†ng</option>
            <option value="images/color/color/cathulu.jpg">c√° th√π l√π</option>
            <option value="images/color/color/cabuom.jpg">c√° bu·ªìm</option>
            <option value="images/color/color/canemo.jpg">c√° nemo</option>
            <option value="images/color/color/bohung.jpg">b·ªç hung</option>
          </select>
        </div>
        <div class="upload-area">
          <label for="uploadInput" class="upload-label">‚¨ÜÔ∏è T·∫£i ·∫£nh l√™n</label>
          <input type="file" id="uploadInput" accept="image/*" hidden>
        </div>
      </div>

      <div class="tool-row">
        <button id="fillModeBtn" class="mode-btn active">üñåÔ∏è T√¥ v√πng</button>
        <button id="brushModeBtn" class="mode-btn">‚úçÔ∏è C·ªç v·∫Ω</button>
        <button id="eraserModeBtn" class="mode-btn">ü™ù C·ªç x√≥a</button>
        <select id="brushSizeSelect" class="brush-size-select" style="display: none;">
          <option value="1">C·ª° c·ªç 1x</option>
          <option value="2">C·ª° c·ªç 2x</option>
          <option value="3">C·ª° c·ªç 3x</option>
          <option value="4">C·ª° c·ªç 4x</option>
          <option value="5" selected>C·ª° c·ªç 5x</option>
          <option value="6">C·ª° c·ªç 6x</option>
          <option value="7">C·ª° c·ªç 7x</option>
          <option value="8">C·ª° c·ªç 8x</option>
          <option value="9">C·ª° c·ªç 9x</option>
          <option value="10">C·ª° c·ªç 10x</option>
        </select>
      </div>

      <div id="colorPalette" class="palette"></div>

      <div class="canvas-container">
        <div class="canvas-wrapper">
          <canvas id="canvas"></canvas>
        </div>
      </div>

      <div class="action-row">
        <div class="action-left">
          <button id="undoBtn">‚Ü©Ô∏è Undo</button>
          <button id="redoBtn">‚Ü™Ô∏è Redo</button>
        </div>
        <div class="action-right">
          <button id="downloadBtn">üíæ L∆∞u ·∫£nh</button>
        </div>
      </div>

      <p class="note">
        üìå <strong>Ghi ch√∫:</strong> ·∫¢nh upload c·∫ßn c√≥ vi·ªÅn ranh gi·ªõi r√µ r√†ng, kh√¥ng b·ªã m·ªù ho·∫∑c ch·ªìng m√†u ƒë·ªÉ t√¥ hi·ªáu qu·∫£.
      </p>
    </section>
  </main>

  <footer class="footer">
    <div class="container footer-inner">
      <p>
        üìû Zalo: <a href="tel:+84903082089">+84 903 082 089</a> |
        üåê <a href="https://www.facebook.com/profile.php?id=100010250733315" target="_blank">Facebook: Tung Ho</a>
      </p>
    </div>
  </footer>

  <!-- ‚ö°Ô∏è C·∫£nh b√°o khi m·ªü t·ª´ app -->
  <script>
    function isInAppBrowser() {
      const ua = navigator.userAgent || navigator.vendor || window.opera;
      if (/FBAN|FBAV/i.test(ua)) return "Facebook";
      if (/Instagram/i.test(ua)) return "Instagram";
      if (/Zalo/i.test(ua)) return "Zalo";
      if (/Line/i.test(ua)) return "Line";
      if (/TikTok/i.test(ua)) return "TikTok";
      if (ua.includes("wv") && ua.includes("Android")) return "App Android";
      return null;
    }

    function showInAppWarning() {
      const appName = isInAppBrowser();
      if (!appName) return;

      const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
      const isAndroid = /Android/i.test(navigator.userAgent);
      const browserName = isIOS ? "Safari" : "Chrome";
      const currentUrl = window.location.href;

      const overlay = document.createElement("div");
      overlay.id = "inAppOverlay";
      overlay.style.cssText = `
        position:fixed;top:0;left:0;width:100%;height:100%;
        background:rgba(0,0,0,0.85);z-index:9999;display:flex;
        align-items:center;justify-content:center;
        font-family:sans-serif;
      `;

      let buttonHTML = `<button id="stayBtn" style="padding:15px 20px;font-size:16px;background:#ccc;border:none;border-radius:8px;">·ªû l·∫°i trang</button>`;

      if (isAndroid) {
        buttonHTML += `<button id="openBrowserBtn" style="padding:15px 20px;font-size:16px;margin-left:15px;background:#4CAF50;color:#fff;border:none;border-radius:8px;">M·ªü b·∫±ng Chrome</button>`;
      }

      overlay.innerHTML = `
        <div style="background:#fff;padding:30px;max-width:90%;border-radius:12px;text-align:center;color:#000;">
          <h2>‚ö†Ô∏è ƒêang m·ªü t·ª´ ${appName}</h2>
          <p>Tr√¨nh duy·ªát trong ·ª©ng d·ª•ng <b>${appName}</b> kh√¥ng h·ªó tr·ª£ <b>L∆∞u ·∫£nh</b>.</p>
          ${isIOS ? '<p>Vui l√≤ng <b>M·ªü b·∫±ng Safari/Chrome</b>.</p>' : ''}
          <div style="margin-top:20px;display:flex;justify-content:center;flex-wrap:wrap;gap:10px;">
            ${buttonHTML}
          </div>
        </div>
      `;
      document.body.appendChild(overlay);

      document.getElementById("stayBtn").addEventListener("click", () => {
        overlay.remove();
        setTimeout(() => {
          if (window.initMenuButton) window.initMenuButton();
        }, 50);
      });

      if (isAndroid && document.getElementById("openBrowserBtn")) {
        document.getElementById("openBrowserBtn").addEventListener("click", () => {
          window.location.href = `intent://${location.host}${location.pathname}#Intent;scheme=https;package=com.android.chrome;end`;
        });
      }
    }

    window.addEventListener("DOMContentLoaded", showInAppWarning);
  </script>

</body>
</html>
