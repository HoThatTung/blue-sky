<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>T√¥ m√†u cho di·ªÅu</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/color.css" />
  <script defer src="js/color.js"></script>

  <!-- ‚ö†Ô∏è C·∫£nh b√°o tr√¨nh duy·ªát in-app b·ªã gi·ªõi h·∫°n -->
  <script>
    function detectInAppBrowser() {
      const ua = navigator.userAgent || navigator.vendor || window.opera;
      if (/Zalo/i.test(ua)) return "Zalo";
      if (/FBAN|FBAV/i.test(ua)) return "Facebook";
      if (/Instagram/i.test(ua)) return "Instagram";
      if (/Line/i.test(ua)) return "Line";
      if (/TikTok/i.test(ua)) return "TikTok";
      if (ua.includes("wv") && ua.includes("Android")) return "·ª®ng d·ª•ng";
      return null;
    }

    function openInDefaultBrowser() {
      const url = window.location.href;
      const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
      const isAndroid = /Android/i.test(navigator.userAgent);

      if (isIOS) {
        window.location = `x-web-search://?url=${encodeURIComponent(url)}`;
      } else if (isAndroid) {
        window.location = `intent://${url.replace(/^https?:\/\//, '')}#Intent;scheme=https;package=com.android.chrome;end`;
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      const app = detectInAppBrowser();
      if (!app) return;

      const modal = document.createElement("div");
      modal.innerHTML = `
        <div style="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.6);z-index:9998;"></div>
        <div style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:24px;border-radius:12px;max-width:90%;text-align:center;z-index:9999;font-family:sans-serif;box-shadow:0 4px 20px rgba(0,0,0,0.3);">
          <h3 style="margin-top:0;font-size:18px;color:#d9534f;">‚ö†Ô∏è ƒêang m·ªü t·ª´ ${app}</h3>
          <p style="font-size:15px;color:#333;">B·∫°n ƒëang m·ªü trang t·ª´ <strong>${app}</strong>.<br>M·ªôt s·ªë ch·ª©c nƒÉng nh∆∞ <strong>l∆∞u ·∫£nh</strong> c√≥ th·ªÉ kh√¥ng ho·∫°t ƒë·ªông.</p>
          <p style="font-size:15px;">üëâ B·∫°n c√≥ mu·ªën m·ªü trang b·∫±ng tr√¨nh duy·ªát h·ªá th·ªëng?</p>
          <div style="margin-top:15px;display:flex;justify-content:space-between;gap:10px;">
            <button id="stayBtn" style="flex:1;padding:10px 0;background:#6c757d;color:#fff;border:none;border-radius:6px;font-size:14px;">·ªû l·∫°i trang</button>
            <button id="openBrowserBtn" style="flex:1;padding:10px 0;background:#007bff;color:#fff;border:none;border-radius:6px;font-size:14px;">
              M·ªü b·∫±ng ${/iPhone|iPad|iPod/i.test(navigator.userAgent) ? "Safari" : "Chrome"}
            </button>
          </div>
        </div>
      `;
      document.body.appendChild(modal);

      document.getElementById("stayBtn").onclick = () => {
        modal.remove();
      };

      document.getElementById("openBrowserBtn").onclick = () => {
        openInDefaultBrowser();
      };
    });
  </script>
</head>

<body>
  <header class="header">
    <div class="container header-inner">
      <img src="images/logo.webp" alt="Logo Blue Sky" class="logo" />
      <button class="menu-toggle" id="menuToggle" aria-label="M·ªü menu">‚ò∞</button>
      <nav class="nav" id="mainNav">
        <a href="index.html">Trang ch·ªß</a>
        <a href="about.html">Gi·ªõi thi·ªáu</a>
        <a href="shop.html">S·∫£n ph·∫©m</a>
        <a href="color.html" class="active">T√¥ m√†u</a>
        <a href="events.html">S·ª± ki·ªán</a>
        <a href="contact.html">Li√™n h·ªá</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="container box">
      <h1>T√î M√ÄU CHO DI·ªÄU</h1>

      <div class="controls-row">
        <div class="select-area">
          <select id="imageSelect" required class="placeholder">
            <option id="placeholderOption" value="" disabled selected hidden>Di·ªÅu Blue Sky...</option>
            <option value="images/color/color/pilot.jpg">Pilot</option>
            <option value="images/color/color/pilotlung.jpg">Pilot m·∫∑t l∆∞ng</option>
            <option value="images/color/color/cavang.jpg">c√° v√†ng</option>
            <option value="images/color/color/cathulu.jpg">c√° th√π l√π</option>
            <option value="images/color/color/cabuom.jpg">c√° bu·ªìm</option>
            <option value="images/color/color/canemo.jpg">c√° nemo</option>
            <option value="images/color/color/bohung.jpg">b·ªç hung</option>
          </select>
        </div>
        <div class="upload-area">
          <label for="uploadInput" class="upload-label">‚¨ÜÔ∏è T·∫£i ·∫£nh l√™n</label>
          <input type="file" id="uploadInput" accept="image/*" hidden>
        </div>
      </div>

      <div class="tool-row">
        <button id="fillModeBtn" class="mode-btn active">üñåÔ∏è T√¥ v√πng</button>
        <button id="brushModeBtn" class="mode-btn">‚úçÔ∏è C·ªç v·∫Ω</button>
        <button id="eraserModeBtn" class="mode-btn">üßΩ C·ªç x√≥a</button>
        <select id="brushSizeSelect" class="brush-size-select" style="display: none;">
          <option value="1">C·ª° c·ªç 1x</option>
          <option value="2">C·ª° c·ªç 2x</option>
          <option value="3">C·ª° c·ªç 3x</option>
          <option value="4">C·ª° c·ªç 4x</option>
          <option value="5" selected>C·ª° c·ªç 5x</option>
          <option value="6">C·ª° c·ªç 6x</option>
          <option value="7">C·ª° c·ªç 7x</option>
          <option value="8">C·ª° c·ªç 8x</option>
          <option value="9">C·ª° c·ªç 9x</option>
          <option value="10">C·ª° c·ªç 10x</option>
        </select>
      </div>

      <div id="colorPalette" class="palette"></div>

      <div class="canvas-container">
        <div class="canvas-wrapper">
          <canvas id="canvas"></canvas>
        </div>
      </div>

      <div class="action-row">
        <div class="action-left">
          <button id="undoBtn">‚Ü©Ô∏è Undo</button>
          <button id="redoBtn">‚Ü™Ô∏è Redo</button>
        </div>
        <div class="action-right">
          <button id="downloadBtn">üíæ L∆∞u ·∫£nh</button>
        </div>
      </div>

      <p class="note">
        üìå <strong>Ghi ch√∫:</strong> ·∫¢nh upload c·∫ßn c√≥ vi·ªÅn ranh gi·ªõi r√µ r√†ng, kh√¥ng b·ªã m·ªù ho·∫∑c ch·ªìng m√†u ƒë·ªÉ t√¥ hi·ªáu qu·∫£.
      </p>
    </section>
  </main>

  <footer class="footer">
    <div class="container footer-inner">
      <p>
        üìû Zalo: <a href="tel:+84903082089">+84 903 082 089</a> |
        üåê <a href="https://www.facebook.com/profile.php?id=100010250733315" target="_blank">Facebook: Tung Ho</a>
      </p>
    </div>
  </footer>
</body>
</html>
